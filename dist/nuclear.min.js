!function t(e,r,s){function n(o,c){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!c&&u)return u(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return n(r?r:t)},h,h.exports,t,e,r,s)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,r){!function(t,s){"function"==typeof define&&define.amd?define(function(){return s(t)}):"object"==typeof e&&e&&e.exports?e.exports=s(t):"object"==typeof r&&r?r.EventsEmitter=s(t):t.EventsEmitter=s(t)}(this,function(t){"use strict";function e(){}function r(e,r,s,n,i){var u=c;c+=1,"_listeners"in e||(e._listeners={callbacks:Object.create(null),contexts:Object.create(null),times:Object.create(null)}),"_events"in e||(e._events=Object.create(null)),e._listeners.callbacks[u]=s,e._listeners.contexts[u]=n,5===arguments.length&&(e._listeners.times[u]=i),"_memories"in e&&Array.isArray(e._memories[r])&&(t.setImmediate||t.setTimeout)(function(){o(e,u,e._memories[r])},0);var h=e._events[r];return"number"==typeof h?e._events[r]=[h,u]:Array.isArray(h)?h.push(u):e._events[r]=u,u}function s(t,e,r){var s=(t._listeners.callbacks,t._events[e]);if("number"==typeof s)i(t,s);else if(Array.isArray(s))for(var n=s.length,o=0;n>o;o+=1){var c=s[o];i(t,c)}r||delete t._events[e]}function n(t,e,r){var s=t._listeners.callbacks,n=t._events[e];if("number"==typeof n)n in s||(i(t,n),delete t._events[e]);else if(Array.isArray(n)){for(var o=n.length,c=0;o>c;c+=1){var u=n[c];u in s||(i(t,u),n.splice(c,1),o-=1,c-=1)}0!==o||r||delete t._events[e]}}function i(t,e){delete t._listeners.callbacks[e],delete t._listeners.contexts[e],delete t._listeners.times[e]}function o(e,r,s){if(r in e._listeners.callbacks){var n=e._listeners.callbacks[r],o=e._listeners.contexts[r]||t;switch(r in e._listeners.times&&(e._listeners.times[r]-=1,e._listeners.times[r]<1&&i(e,r)),s.length){case 0:return n.call(o);case 1:return n.call(o,s[0]);case 2:return n.call(o,s[0],s[1]);case 3:return n.call(o,s[0],s[1],s[2]);default:return n.apply(o,s)}}}var c=1;return e.prototype.on=function(e,s,n){return 3===arguments.length?"times"in n?n.times<1?0:r(this,e,s,n.context||t,n.times):r(this,e,s,n.context||t):r(this,e,s,t)},e.prototype.once=function(e,s,n){return 3===arguments.length?r(this,e,s,n.context||t,1):r(this,e,s,t,1)},e.prototype.off=function(t){return"_listeners"in this&&t in this._listeners.callbacks?(delete this._listeners.callbacks[t],delete this._listeners.contexts[t],delete this._listeners.times[t],!0):!1},e.prototype.clear=function(t,e){if("_listeners"in this&&"_events"in this){var r,i;switch(arguments.length){case 0:for(t in this._events)s(this,t,!1);break;case 1:if("string"==typeof t)s(this,t,!1);else if(Array.isArray(t))for(i=t.length;i--;)s(this,t[i],!1);else{e=t,r=e.soft||!1;for(t in this._events)e.ghosts?n(this,t,r):s(this,t,r)}break;case 2:if(r=e.soft||!1,"string"==typeof t)e.ghosts?n(this,t,r):s(this,t,r);else if(Array.isArray(t))for(i=t.length;i--;)e.ghosts?n(this,t[i],r):s(this,t[i],r)}}},e.prototype.listeners=function(t){var e=[];if(!("_listeners"in this&&"_events"in this))return e;var r=this._listeners.callbacks,s=this._events[t];if("number"==typeof s)s in r?e.push(r[s]):i(this,s);else if(Array.isArray(s))for(var n=s.length,o=0;n>o;o+=1){var c=s[o];c in r?e.push(r[c]):i(this,c)}return e},e.prototype.remember=function(t){if("_memories"in this||(this._memories=Object.create(null)),Array.isArray(t))for(var e=t.length;e--;)this._memories[t[e]]=null;else this._memories[t]=null},e.prototype.forget=function(t){if("_memories"in this)if(Array.isArray(t))for(var e=t.length;e--;)delete this._memories[t[e]];else delete this._memories[t]},e.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1);if("_memories"in this&&t in this._memories&&(this._memories[t]=e),!("_listeners"in this&&"_events"in this))return!1;var r=this._events[t];if("number"==typeof r)o(this,r,e);else{if(!Array.isArray(r))return!1;for(var s=r.length,n=0;s>n;n+=1){var i=r[n];o(this,i,e)}}return!0},e.mixins=function(t){var r=e.prototype;for(var s in r)t[s]=r[s];return t},e.mixins(e),e})},{}],2:[function(t,e){"use strict";function r(){}e.exports=r},{}],3:[function(t,e){"use strict";function r(){}e.exports=r},{}],4:[function(t,e){"use strict";var r,s;e.exports=r={},s=t("./module"),r.events=t("./nuclear.events"),r.registry=t("./nuclear.registry"),r.component=t("./nuclear.component"),r.entity=t("./nuclear.entity"),r.system=t("./nuclear.system"),r.module=function(t,e){var r;return 1===arguments.length?this.registry.module(t):r=new s(t,e)},r.import=function(t){var e,r;for(r=t.length,e=0;r>e;e+=1)this.registry.import(t[e])}},{"./module":5,"./nuclear.component":6,"./nuclear.entity":7,"./nuclear.events":8,"./nuclear.registry":9,"./nuclear.system":10}],5:[function(t,e){"use strict";function r(t,e){this.name=t.trim(),this.requires=e,this.exports=Object.create(null),this._config=Object.create(null),this._components=Object.create(null),this._entities=Object.create(null),this._systems=Object.create(null)}var s,n,i;s=t("./component"),n=t("./entity"),i=t("./system"),r.prototype.components=function(){return Object.keys(this._components)},r.prototype.entities=function(){return Object.keys(this._entities)},r.prototype.systems=function(){return Object.keys(this._systems)},r.prototype.config=function(t){var e;if(0===arguments.length)return this._config;for(e in t)this._config[e]=t[e];return this},r.prototype.component=function(t,e){var r;if(1===arguments.length){if(r=this._components[t])return r;throw new Error}if(t in this.exports)throw new Error;return this.exports[t]=this._components[t]=new s(t,e),this},r.prototype.entity=function(t,e){var r;if(1===arguments.length){if(r=this._entities[t])return r;throw new Error}if(t in this.exports)throw new Error;return this.exports[t]=this._entities[t]=new n(t,e),this},r.prototype.system=function(t,e){var r;if(1===arguments.length){if(r=this._systems[t])return r;throw new Error}if(t in this.exports)throw new Error;return this.exports[t]=this._systems[t]=new i(t,e),this},e.exports=r},{"./component":2,"./entity":3,"./system":12}],6:[function(t,e){"use strict";function r(t){return s.component(t)}var s;s=t("./nuclear.registry"),e.exports=r},{"./nuclear.registry":9}],7:[function(t,e){"use strict";function r(t){return s.entity(t)}var s;s=t("./nuclear.registry"),e.exports=r},{"./nuclear.registry":9}],8:[function(t,e){"use strict";var r;r=t("../../lib/events-emitter.min"),e.exports=new r},{"../../lib/events-emitter.min":1}],9:[function(t,e){"use strict";var r;r=t("./registry"),e.exports=new r},{"./registry":11}],10:[function(t,e){"use strict";function r(t){return s.system(t)}var s;s=t("./nuclear.registry"),e.exports=r},{"./nuclear.registry":9}],11:[function(t,e){"use strict";function r(){this._modules=Object.create(null),this._components=Object.create(null),this._entities=Object.create(null),this._systems=Object.create(null)}var s,n,i,o;s=t("./component"),n=t("./entity"),i=t("./system"),o=/([^\s]+)\s+from\s+([^\s]+)/,r.prototype.components=function(){return Object.keys(this._components)},r.prototype.entities=function(){return Object.keys(this._entities)},r.prototype.systems=function(){return Object.keys(this._systems)},r.prototype.import=function(t){var e,r,o,c;if(!(t.name in this._modules)){for(r=t.requires.length,e=0;r>e;e+=1)if(!(t.requires[e]in this._modules))throw new Error;this._modules[t.name]=t;for(o in t.exports)c=t.exports[o],c instanceof s?this._components[o]=c:c instanceof n?this._entities[o]=c:c instanceof i&&(this._systems[o]=c)}},r.prototype.clear=function(){this._modules=Object.create(null),this._components=Object.create(null),this._entities=Object.create(null),this._systems=Object.create(null)},r.prototype.module=function(t){var e;if(e=this._modules[t])return e;throw new Error},r.prototype.component=function(t){var e;if(o.test(t))return this.module(RegExp.$2).component(RegExp.$1);if(e=this._components[t])return e;throw new Error},r.prototype.entity=function(t){var e;if(o.test(t))return this.module(RegExp.$2).entity(RegExp.$1);if(e=this._entities[t])return e;throw new Error},r.prototype.system=function(t){var e;if(o.test(t))return this.module(RegExp.$2).system(RegExp.$1);if(e=this._systems[t])return e;throw new Error},e.exports=r},{"./component":2,"./entity":3,"./system":12}],12:[function(t,e){"use strict";function r(){}e.exports=r},{}],13:[function(t){"use strict";var e,r;e=t("./pool"),r=t("./modules/core.watchers"),window.nuclear=t("./core/index"),window.nuclear.import([r]),window.Pool=e.Pool,window.FixedPool=e.FixedPool},{"./core/index":4,"./modules/core.watchers":14,"./pool":19}],14:[function(t,e){"use strict";var r,s,n;r=t("./../../core/index"),s=t("./watcher-component"),n=t("./watch-system"),e.exports=r.module("core.watchers",[]).component("watcher",function(t){return new s(t)}).system("watch",["watchers"],n)},{"./../../core/index":4,"./watch-system":15,"./watcher-component":16}],15:[function(t,e){"use strict";function r(t){var e,r,s,n;e=this.watcher.records;for(r in e)s=e[r],n=s.getter(t),n!==s.old&&s.listener(n,s.old),s.old=n}e.exports=r},{}],16:[function(t,e){"use strict";function r(t){this.entity=t,this.records=Object.create(null)}function s(t){var e,r;return e=s.cache[t],e||(r=t.split("."),s[t]=e=new Function("n",'return function compiledGetter(e) {return n.component("'+r.shift()+'").of(e).'+r.join(".")+"}")(i)),e}function n(t){var e,r;return e=n.cache[t],e||(r=t.split("."),n.cache[t]=e=new Function("n",'return function compiledSetter(e,v) {return n.component("'+r.shift()+'").of(e).'+r.join(".")+"=v}")(i)),e}var i;i=t("./../../core/index"),r.prototype.watch=function(t,e){var r;if("string"==typeof t)this._watch(t,e);else{r=t;for(t in r)this._watch(t,r[t])}},r.prototype._watch=function(t,e){var r,i,o,c;if(t in this.records)throw new Error("A watcher is already defined for the "+t+" path");r=s(t),i=n(t),o=r(this.entity),c={path:t,listener:e,getter:r,setter:i,old:o},this.records[t]=c},s.cache=Object.create(null),n.cache=Object.create(null),r.prototype.unwatch=function(t){var e;if(0===arguments.length)this.records={};else if("string"==typeof t)this._unwatch(t);else{e=t;for(t in e)this._unwatch(t)}},r.prototype._unwatch=function(t){var e;if(e=this.records[t],!e)throw new Error("There is no watcher defined for the "+t+" path");delete this.records[t]},e.exports=r},{"./../../core/index":4}],17:[function(t,e){"use strict";function r(t,e){var s;this._pool=[],this._defered=[],this._size=2===arguments.length&&"size"in e?e.size:r.defaults.size;for(s=0;s<this._size;s+=1)this._pool.push(t())}r.prototype.create=function(){var t;return this._size>0?(t=this._pool[--this._size],this._pool[this._size]=null,t):void 0},r.prototype.defer=function(t){var e;this._size>0?(e=this._pool[--this._size],this._pool[this._size]=null,(setImmediate||setTimeout)(function(){t(e)},0)):this._defered.push(t)},r.prototype.release=function(t){this._defered.length>0?this._defered.shift()(t):this._pool[this._size++]=t},r.prototype.size=function(){return this._pool.length},r.prototype.freeSize=function(){return this._size},r.prototype.allocatedSize=function(){return this._pool.length-this._size},r.defaults={size:100},e.exports=r},{}],18:[function(t,e){"use strict";function r(t,e){this._factory=t,this._pool=[],this._defered=[],2===arguments.length?(this._size="size"in e?e.size:r.defaults.size,this.growth="growth"in e?e.growth:r.defaults.growth,this.threshold="threshold"in e?e.threshold:r.defaults.threshold):(e=r.defaults,this._size=e.size,this.growth=e.growth,this.threshold=e.threshold),this.allocate(this._size)}r.prototype.create=function(){return this._pool.length<this.threshold&&this.allocate(this.growth),this._pool.pop()},r.prototype.defer=function(t){var e;this._pool.length>0?(e=this._pool.pop(),(setImmediate||setTimeout)(function(){t(e)},0)):this._defered.push(t)},r.prototype.allocate=function(t){var e;for(e=0;t>e;e+=1)this._pool.push(this._factory());this._size+=t},r.prototype.release=function(t){this._defered.length>0?this._defered.shift()(t):this._pool.push(t)},r.prototype.size=function(){return this._size},r.prototype.freeSize=function(){return this._pool.length},r.prototype.allocatedSize=function(){return this._size-this._pool.length},r.defaults={size:100,growth:1,threshold:1},e.exports=r},{}],19:[function(t,e,r){"use strict";r.Pool=t("./Pool"),r.FixedPool=t("./FixedPool")},{"./FixedPool":17,"./Pool":18}]},{},[13]);