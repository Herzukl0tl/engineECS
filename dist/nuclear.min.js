/* nuclear 05-04-2014 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define(function(){return d(a)}):"object"==typeof b&&b&&b.exports?b.exports=d(a):"object"==typeof c&&c?c.EventsEmitter=d(a):a.EventsEmitter=d(a)}(this,function(a){"use strict";function b(){}function c(b,c,d,e,f){var i=h;h+=1,"_listeners"in b||(b._listeners={callbacks:Object.create(null),contexts:Object.create(null),times:Object.create(null)}),"_events"in b||(b._events=Object.create(null)),b._listeners.callbacks[i]=d,b._listeners.contexts[i]=e,5===arguments.length&&(b._listeners.times[i]=f),"_memories"in b&&Array.isArray(b._memories[c])&&(a.setImmediate||a.setTimeout)(function(){g(b,i,b._memories[c])},0);var j=b._events[c];return"number"==typeof j?b._events[c]=[j,i]:Array.isArray(j)?j.push(i):b._events[c]=i,i}function d(a,b,c){var d=(a._listeners.callbacks,a._events[b]);if("number"==typeof d)f(a,d);else if(Array.isArray(d))for(var e=d.length,g=0;e>g;g+=1){var h=d[g];f(a,h)}c||delete a._events[b]}function e(a,b,c){var d=a._listeners.callbacks,e=a._events[b];if("number"==typeof e)e in d||(f(a,e),delete a._events[b]);else if(Array.isArray(e)){for(var g=e.length,h=0;g>h;h+=1){var i=e[h];i in d||(f(a,i),e.splice(h,1),g-=1,h-=1)}0!==g||c||delete a._events[b]}}function f(a,b){delete a._listeners.callbacks[b],delete a._listeners.contexts[b],delete a._listeners.times[b]}function g(b,c,d){if(c in b._listeners.callbacks){var e=b._listeners.callbacks[c],g=b._listeners.contexts[c]||a;switch(c in b._listeners.times&&(b._listeners.times[c]-=1,b._listeners.times[c]<1&&f(b,c)),d.length){case 0:return e.call(g);case 1:return e.call(g,d[0]);case 2:return e.call(g,d[0],d[1]);case 3:return e.call(g,d[0],d[1],d[2]);default:return e.apply(g,d)}}}var h=1;return b.prototype.on=function(b,d,e){return 3===arguments.length?"times"in e?e.times<1?0:c(this,b,d,e.context||a,e.times):c(this,b,d,e.context||a):c(this,b,d,a)},b.prototype.once=function(b,d,e){return 3===arguments.length?c(this,b,d,e.context||a,1):c(this,b,d,a,1)},b.prototype.off=function(a){return"_listeners"in this&&a in this._listeners.callbacks?(delete this._listeners.callbacks[a],delete this._listeners.contexts[a],delete this._listeners.times[a],!0):!1},b.prototype.clear=function(a,b){if("_listeners"in this&&"_events"in this){var c,f;switch(arguments.length){case 0:for(a in this._events)d(this,a,!1);break;case 1:if("string"==typeof a)d(this,a,!1);else if(Array.isArray(a))for(f=a.length;f--;)d(this,a[f],!1);else{b=a,c=b.soft||!1;for(a in this._events)b.ghosts?e(this,a,c):d(this,a,c)}break;case 2:if(c=b.soft||!1,"string"==typeof a)b.ghosts?e(this,a,c):d(this,a,c);else if(Array.isArray(a))for(f=a.length;f--;)b.ghosts?e(this,a[f],c):d(this,a[f],c)}}},b.prototype.listeners=function(a){var b=[];if(!("_listeners"in this&&"_events"in this))return b;var c=this._listeners.callbacks,d=this._events[a];if("number"==typeof d)d in c?b.push(c[d]):f(this,d);else if(Array.isArray(d))for(var e=d.length,g=0;e>g;g+=1){var h=d[g];h in c?b.push(c[h]):f(this,h)}return b},b.prototype.remember=function(a){if("_memories"in this||(this._memories=Object.create(null)),Array.isArray(a))for(var b=a.length;b--;)this._memories[a[b]]=null;else this._memories[a]=null},b.prototype.forget=function(a){if("_memories"in this)if(Array.isArray(a))for(var b=a.length;b--;)delete this._memories[a[b]];else delete this._memories[a]},b.prototype.trigger=function(a){var b=Array.prototype.slice.call(arguments,1);if("_memories"in this&&a in this._memories&&(this._memories[a]=b),!("_listeners"in this&&"_events"in this))return!1;var c=this._events[a];if("number"==typeof c)g(this,c,b);else{if(!Array.isArray(c))return!1;for(var d=c.length,e=0;d>e;e+=1){var f=c[e];g(this,f,b)}}return!0},b.mixins=function(a){var c=b.prototype;for(var d in c)a[d]=c[d];return a},b.mixins(b),b})},{}],2:[function(a){"use strict";function b(a){this.layer=a.layer||0,this.systems=a.systems||[],d.once("add:layer",function(a){for(var b=d("layer").of(a),f=0;f<b.systems.length;f++){var g=b.systems[f];e(g).sort(c)}})}function c(a,b){var c=d("layer").of(a),e=d("layer").of(b);return c.layer-e.layer}var d=a("../core/component"),e=a("../core/system");d.define("layer",function(a,c){return new b(c)})},{"../core/component":5,"../core/system":12}],3:[function(a){"use strict";function b(a){this.entity=a,this.records=Object.create(null)}function c(a,b,c){if(b in a.records)throw new Error;var f=d(b),g=e(b),h=f(a.entity),i={path:b,listener:c,getter:f,setter:g,old:h};a.records[b]=i}function d(a){var b=d.cache[a];if(void 0===b){var c=a.split(".");d[a]=b=new Function("c",'return function compiledGetter(e) {return c("'+c.shift()+'").of(e).'+c.join(".")+"}")(g)}return b}function e(a){var b=e.cache[a];if(void 0===b){var c=a.split(".");e.cache[a]=b=new Function("c",'return function compiledSetter(e,v) {return c("'+c.shift()+'").of(e).'+c.join(".")+"=v}")(g)}return b}function f(a,b){var c=a.records[b];if(void 0===c)throw new Error;delete a.records[b]}var g=a("../core/component");b.prototype.watch=function(a,b){if("string"==typeof a)c(this,a,b);else{var d=a;for(a in d)c(this,a,d[a])}},d.cache=Object.create(null),e.cache=Object.create(null),b.prototype.unwatch=function(a){if(0===arguments.length)this.records={};else if("string"==typeof a)f(this,a);else{var b=a;for(a in b)f(this,a)}},g.define("watcher",function(a){return new b(a)})},{"../core/component":5}],4:[function(a,b){"use strict";function c(b,c){this.name=b,this.definition=c,this._components=Object.create(null),this._disabledComponents=Object.create(null),void 0===d&&(d=a("../component"))}var d;c.prototype.of=function(a,b){var c=this._components[a]||this._disabledComponents[a];if(2===arguments.length&&!this.in(a)){if(b.required)throw new Error;b.add&&(c=this.add(a))}return c},c.prototype.in=function(a){return a in this._components||a in this._disabledComponents},c.prototype.add=function(a){if(this.in(a))throw new Error;var b=this.definition.apply(this,arguments);return this._components[a]=b,d.trigger("add:"+this.name,a,this.name),b},c.prototype.remove=function(a){return this.in(a)?(delete this._components[a],delete this._disabledComponents[a],d.trigger("remove:"+this.name,a,this.name),!0):!1},c.prototype.share=function(a,b){if(!this.in(a))return null;var c=this.of(a);if(Array.isArray(b))for(var e=b.length-1;e>=0;e-=1)this._components[b[e]]=c,d.trigger("add:"+this.name,b[e],this.name);else this._components[b]=c,d.trigger("add:"+this.name,b,this.name);return c},c.prototype.disable=function(a){return a in this._components?(this._disabledComponents[a]=this._components[a],delete this._components[a],d.trigger("disable:"+this.name,a,this.name),!0):!1},c.prototype.enable=function(a){return a in this._disabledComponents?(this._components[a]=this._disabledComponents[a],delete this._disabledComponents[a],d.trigger("enable:"+this.name,a,this.name),!0):!1},c.prototype.isEnabled=function(a){if(this.in(a))return a in this._components?!0:!1;throw new Error},b.exports=c},{"../component":5}],5:[function(a,b){"use strict";function c(a){if(a in c._definitions)return c._definitions[a];throw new Error}function d(a,b){var c=h[a]||[];c.push(b),h[a]=c}function e(a,b){var d=c.of(a),e=d.indexOf(b);d.splice(e,1)}var f=a("../../../lib/events-emitter.min"),g=a("./definition"),h=Object.create(null),i={};f.mixins(c),c._definitions=Object.create(null),c.define=function(a,b){if(a in c._definitions)throw new Error;var f=new g(a,b),h=i;return h.context=f,c._definitions[a]=f,c.on("add:"+a,d,h),c.on("remove:"+a,e,h),f},c.of=function(a){if(h[a])return h[a];throw new Error},b.exports=c},{"../../../lib/events-emitter.min":1,"./definition":4}],6:[function(a,b){"use strict";function c(b,c){this.name=b,this.definition=null,this._source=c,this._components=[],this._defaults=Object.create(null),this._sourceHasChanged=!0,this._componentsHaveChanged=!0,this._defaultsHaveChanged=!0,this._entities=[],void 0===e&&(e=a("../entity"))}function d(a,b,c,d){if(c[a.name]=a._source[b],d.push(a.name),"extends"in a._source)for(var f=a._source.extends.slice();f.length>0;){var g=f.shift(),h=e(g)._source;g in c||("extends"in h&&f.unshift.apply(f,h.extends),c[g]=h[b],d.push(g))}}var e,f=a("../component");c.prototype.create=function(a){var b=e.next();this._sourceHasChanged&&this.compile(),this.definition(b,a);for(var c in a)if(f(c).in(b)){var d=f(c).of(b),g=a[c];for(var h in g){for(var i=h.split("."),j=i.length-1,k=d,l=0;j>l;l+=1)k=k[i[l]];k[i[l]]=g[h]}}return this._entities.push(b),e.trigger("create:"+this.name,b),e.trigger("create_entity",b,this.name),b},c.prototype.source=function(a){return 0===arguments.length?this._source:("extends"in a&&(this._source.extends=a.extends,this._componentsHaveChanged=!0,this._defaultsHaveChanged=!0,this._sourceHasChanged=!0),"components"in a&&(this._source.components=a.components,this._componentsHaveChanged=!0,this._sourceHasChanged=!0),"defaults"in a&&(this._source.defaults=a.defaults,this._defaultsHaveChanged=!0,this._sourceHasChanged=!0),this)},c.prototype.components=function(){if(this._componentsHaveChanged){var a,b=Object.create(null),c=[];this._components.length=0,this._components.push.apply(this._components,this._source.components),d(this,"components",b,c),a=c.length;for(var e=0;a>e;e+=1){var f=b[c[e]];if(void 0!==f)a:for(var g=f.length-1;g>=0;g-=1){for(var h=f[g],i=this._components.length-1;i>=0;i-=1)if(h===this._components[i])continue a;this._components.push(h)}}this._componentsHaveChanged=!1}return this._components},c.prototype.defaults=function(){if(this._defaultsHaveChanged){var a=Object.create(null),b=[];d(this,"defaults",a,b);for(var c=b.length-1;c>=0;c-=1){var e=a[b[c]];if(void 0!==e)for(var f in e){var g,h=e[f];f in this._defaults||(this._defaults[f]=Object.create(null)),g=this._defaults[f];for(var i in h)g[i]=h[i]}}this._defaultsHaveChanged=!1}return this._defaults},c.prototype.compile=function(){var a="return function "+this.name+"Definition($id, $data) {\n",b="}",c=this.components(),d=this.defaults(),e=Object.create(null),g=[];for(var h in d){var i="$"+g.length,j=d[h];g.push(i),e[h]=i;for(var k in j)b="  "+i+"."+k+" = "+JSON.stringify(j[k])+";\n"+b}g.length>0&&(a+="  var "+g.join(", ")+";\n"),a+="\n";for(var l=c.length-1;l>=0;l-=1)a+="  ",c[l]in e&&(a+=e[c[l]]+" = "),a+='component("'+c[l]+'").add($id, $data["'+c[l]+'"] || Object.create(null));\n';a+="\n",this.definition=new Function("component",a+b)(f),this._sourceHasChanged=!1},c.prototype.serialize=function(a){if(this._entities.indexOf(a)<=-1)return null;var b=[];b.push.apply(b,this._components);var c=Object.create(null),d=f.of(a);c.factory=this.name,c.options=Object.create(null),c.addedComponents=Object.create(null);for(var e=d.length-1;e>0;e--){var g=d[e],h=f(g),i=h.of(a);if("function"==typeof i.toJSON&&(i=i.toJSON()),-1===this._components.indexOf(g))c.addedComponents[g]=i;else{c.options[g]=i;var j=b.indexOf(g);b.splice(j,1)}}return c.removedComponents=b,JSON.stringify(c)},c.prototype.deSerialize=function(a){var b=this.create(a.options);for(var c in a.addedComponents)f(c).add(b,a.addedComponents[c]);for(c=0;c<a.removedComponents.length;c++){var d=a.removedComponents[c];f(d).remove(b)}return b},b.exports=c},{"../component":5,"../entity":7}],7:[function(a,b){"use strict";function c(a){if(a in c._definitions)return c._definitions[a];throw new Error}var d=a("../../../lib/events-emitter.min"),e=a("./definition"),f=a("../component"),g=0,h=Object.create(null);d.mixins(c),c.on("create_entity",function(a,b){h[a]=b}),c._definitions=Object.create(null),c.next=function(){return g+=1},c.define=function(a,b){if(a in c._definitions)throw new Error;var d=new e(a,b);return c._definitions[a]=d,d},c.serialize=function(a){var b=c.factory(a);return c(b).serialize(a)},c.deSerialize=function(a){var b=JSON.parse(a),d=b.factory;return c(d).deSerialize(b)},c.factory=function(a){if(h[a])return h[a];throw new Error},c.remove=function(a){for(var b=f.of(a),d=c(c.factory(a)),e=b.length-1;e>=0;e-=1)f(b[e]).remove(a);for(var g=d._entities.length-1;g>=0;g-=1)if(a===d._entities[g]){d._entities.splice(g,1);break}return c.trigger("remove:"+d.name,a),delete h[a],!0},b.exports=c},{"../../../lib/events-emitter.min":1,"../component":5,"./definition":6}],8:[function(a,b){"use strict";function c(a,b){if(a in c._aliases){var e=c._aliases[a];a=e.cmd,b=e.expression}if(a in c._definitions)return d(a,b);throw new Error}function d(a,b){return c._definitions[a](b)}function e(a){return a.replace(h,"\\$1")}var f=/\s+/g,g=/[^&|!()]+|[&|!()]/g,h=/([.*+?^=!:${}()|\[\]\/\\])/g;c._definitions=Object.create(null),c._aliases=Object.create(null),c._cache=Object.create(null),c._tokens=Object.create(null),c._tokens.and=",",c._tokens.or="OR",c._tokens.not="!",c._tokens.open="(",c._tokens.close=")",c.tokens=function(a){if(0===arguments.length)return c._tokens;var b=c._tokens,d="";for(var f in b)f in a&&(b[f]=a[f]),d+=b[f];d=e(d),g=new RegExp("[^"+d+"]+|["+d+"]","g")},c.define=function(a,b){if(a in c._definitions)throw new Error;c._definitions[a]=b},c.alias=function(a,b){if(a in c._aliases)throw new Error;throw"object"==typeof b&&null!==b&&(c._aliases[a]=b),new Error},c.compile=function(a){var b,d,e,h,i,j=a.replace(f,"");if(!(j in c._cache)){b=c._tokens,d="return function queryExpression($predicate) {\n  return !!(",e=");\n}",h=j.match(g);for(var k=0;i=h[k];k+=1)switch(i){case b.and:h[k]="&&";break;case b.or:h[k]="||";break;case b.not:h[k]="!";break;case b.open:h[k]="(";break;case b.close:h[k]=")";break;default:h[k]="$predicate("+JSON.stringify(i)+")"}try{h=new Function(d+h.join("")+e)()}catch(l){throw new Error}c._cache[j]=h}return c._cache[j]},b.exports=c},{}],9:[function(a,b){"use strict";function c(b,c){this.name=b,this.definition=c,this._context=Object.create(null),this._entities=Object.create(null),this._eventObject=Object.create(null),this.currentIndex=g,void 0===d&&(d=a("../scene"))}var d,e=a("../entity"),f=Object.create(null),g=0;c.prototype.instanciate=function(a){this._eventObject.context=this;var b=e.on("create_entity",f.addEntity,this._eventObject);for(var c in a)this._context[c]=a[c];this.currentIndex=++g,this.definition.apply(this._context),this.currentIndex=--g,e.off(b)},c.prototype.destroy=function(){for(var a in this._entities)e.remove(a),delete this._entities[a]},f.addEntity=function(a){this.currentIndex===g&&(this._entities[a]=!0,d.trigger("add_entity",a,this.name))},b.exports=c},{"../entity":7,"../scene":10}],10:[function(a,b){"use strict";function c(a){if(a in c._definitions)return c._definitions[a];throw new Error}var d=a("../../../lib/events-emitter.min"),e=a("./definition"),f=Object.create(null);d.mixins(c),c.on("add_entity",function(a,b){f[a]=b}),c._definitions=Object.create(null),c.define=function(a,b){if(a in c._definitions)throw new Error;var d=new e(a,b);return c._definitions[a]=d,d},c.of=function(a){if(f[a])return f[a];throw new Error},b.exports=c},{"../../../lib/events-emitter.min":1,"./definition":9}],11:[function(a,b){"use strict";function c(b,c,d,e){"[object Object]"!==Object.prototype.toString.call(e)&&(e=Object.create(null)),this.name=b,this.definition=d,this.components=c,this._context=Object.create(e.context||null),this.entities=[],this._deferredEntities=[],this._sorterManager=Object.create({comparator:function(){},toDeferred:!1}),this._componentPacks=Object.create(null),this._removeEntities=Object.create(null),this._priority=0,this._scheduler=new k(e.msPerUpdate,e.strict,e.extrapolation),this._scheduler.start(),f(this,c),void 0!==e.disable&&g(this,e.disable),void 0===h&&(h=a("../system")),h.on("after running",function(){this._sorterManager.toDeferred&&(this.entities.sort(this._sorterManager.comparator),this._sorterManager.toDeferred=!1)},{context:this})}function d(a,b,c){for(var d=a._context,e=a.components,f=j(j.of(b))._context,g=e.length-1;g>=0;g--)d[e[g]]=c[e[g]];a.definition.call(d,b,f)}function e(a){for(var b=0;b<a._deferredEntities.length;b++){var c=a._deferredEntities[b];void 0===a._removeEntities[c]?a.add(c):(a.remove(c),delete a._removeEntities[c])}a._deferredEntities.length=0}function f(a,b){var c=m;c.context=a;for(var d=0;d<b.length;d++)i.on("add:"+b[d],l.addToDeferred,c),i.on("enable:"+b[d],l.addToDeferred,c),i.on("remove:"+b[d],l.addToDeferredAndRemove,c),i.on("disable:"+b[d],l.addToDeferredAndRemove,c)}function g(a,b){for(var c=0;c<b.length;c++)h.disable(b[c])}var h,i=a("../component"),j=a("../scene"),k=a("../../scheduler/scheduler"),l=Object.create(null),m={};c.prototype.add=function(a){if(this.entities.indexOf(a)>-1)return!1;var b=this.check(a);return null===b?!1:(this.entities.push(a),this._componentPacks[a]=b,!0)},c.prototype.remove=function(a){var b=this.entities.indexOf(parseInt(a));return 0>b?!1:(this.entities.splice(b,1),delete this._componentPacks[a],!0)},c.prototype.check=function(a){for(var b=Object.create(null),c=this.components.length-1;c>=0;c--){var d=i(this.components[c]).of(a);if(void 0===d)return null;b[this.components[c]]=d}return b},c.prototype.run=function(a){var b=this;if(e(b),1===arguments.length){if(-1!==this.entities.indexOf(a)){var c=b._componentPacks[a];return h.trigger("before:"+b.name,a,c),d(b,a,c),h.trigger("after:"+b.name,a,c),!0}return!1}h.trigger("before:"+b.name,b.entities,b._componentPacks),null!==b._autosortComparator&&"function"==typeof b._autosortComparator&&b.entities.sort(b._autosortComparator);var f=b.entities.length;return b._scheduler.run(function(a){for(var c=0;f>c;c++)b._context._deltaTime=a,d(b,b.entities[c],b._componentPacks[b.entities[c]])}),h.trigger("after:"+b.name,b.entities,b._componentPacks),b},c.prototype.sort=function(a){return this._sorterManager.comparator=a,this._sorterManager.toDeferred=!0,this},c.prototype.autosort=function(a){if(0===arguments.length)return this._autosortComparator;if("function"==typeof a||null===a)return this._autosortComparator=a.bind(this._context),this;throw new Error},c.prototype.refresh=function(){e(this)},l.addToDeferred=function(a){this._deferredEntities.push(a)},l.addToDeferredAndRemove=function(a,b){this._deferredEntities.push(a),this._removeEntities[a]=b},b.exports=c},{"../../scheduler/scheduler":17,"../component":5,"../scene":10,"../system":12}],12:[function(a,b){"use strict";function c(a){if(a in c._definitions)return c._definitions[a];throw new Error}function d(a,b){return a._priority-b._priority}var e=a("../../../lib/events-emitter.min"),f=a("./definition");e.mixins(c),c._definitions=Object.create(null),c._list=[],c._listLength=0,c.define=function(a,b,d,e){if(a in c._definitions)throw new Error;var g=new f(a,b,d,e);return c._definitions[a]=g,c._list.push(a),c._listLength++,g},c.priority=function(a,b){return 1===arguments.length?c(a)._priority:(c(a)._priority=b,void c._list.sort(d))},c.run=function(){c.trigger("before running",c._list);for(var a=0;a<c._listLength;a++)c(c._list[a]).run();c.trigger("after running",c._list)},c.disable=function(a){var b=c._list.indexOf(a);c._list.splice(b,1),c._listLength--},b.exports=c},{"../../../lib/events-emitter.min":1,"./definition":11}],13:[function(a){"use strict";window.component=a("./core/component"),window.system=a("./core/system"),window.entity=a("./core/entity"),window.scene=a("./core/scene"),window.Pool=a("./pool").Pool,window.FixedPool=a("./pool").FixedPool},{"./core/component":5,"./core/entity":7,"./core/scene":10,"./core/system":12,"./pool":16}],14:[function(a,b){"use strict";function c(a,b){this._pool=[],this._defered=[],this._size=2===arguments.length&&"size"in b?b.size:c.defaults.size;for(var d=0;d<this._size;d+=1)this._pool.push(a())}c.prototype.create=function(){if(this._size>0){var a=this._pool[--this._size];return this._pool[this._size]=null,a}},c.prototype.defer=function(a){if(this._size>0){var b=this._pool[--this._size];this._pool[this._size]=null,a(b)}else this._defered.push(a)},c.prototype.release=function(a){this._defered.length>0?this._defered.shift()(a):this._pool[this._size++]=a},c.prototype.size=function(){return this._pool.length},c.prototype.freeSize=function(){return this._size},c.prototype.allocatedSize=function(){return this._pool.length-this._size},c.defaults={size:100},b.exports=c},{}],15:[function(a,b){"use strict";function c(a,b){this._factory=a,this._pool=[],this._defered=[],2===arguments.length?(this._size="size"in b?b.size:c.defaults.size,this.growth="growth"in b?b.growth:c.defaults.growth,this.threshold="threshold"in b?b.threshold:c.defaults.threshold):(b=c.defaults,this._size=b.size,this.growth=b.growth,this.threshold=b.threshold),this.allocate(this._size)}c.prototype.create=function(){return this._pool.length<this.threshold&&this.allocate(this.growth),this._pool.pop()},c.prototype.defer=function(a){this._pool.length>0?a(this._pool.pop()):this._defered.push(a)},c.prototype.allocate=function(a){for(var b=0;a>b;b+=1)this._pool.push(this._factory())},c.prototype.release=function(a){this._defered.length>0?this._defered.shift()(a):this._pool.push(a)},c.prototype.size=function(){return this._size},c.prototype.freeSize=function(){return this._pool.length},c.prototype.allocatedSize=function(){return this._size-this._pool.length},c.defaults={size:100,growth:1,threshold:1},b.exports=c},{}],16:[function(a,b,c){"use strict";var d=a("./Pool"),e=a("./FixedPool");c.Pool=d,c.FixedPool=e},{"./FixedPool":14,"./Pool":15}],17:[function(a,b){"use strict";function c(a,b,c){var d=this;d.msPerUpdate=a||16,d.extrapolation=c||!1,d.strict=b,void 0===d.strict&&(d.strict=!0),d.lag=0,d.previous=0,window.addEventListener("focus",function(){d.start()})}c.prototype.run=function(a){var b=Date.now(),c=b-this.previous;if(this.previous=b,this.lag+=c,this.strict){for(;this.lag>=this.msPerUpdate;)a(1),this.lag-=this.msPerUpdate;this.extrapolation&&(a(this.lag/c),this.lag=0)}else a(this.lag/c)},c.prototype.start=function(){this.previous=(new Date).getTime()},c.prototype.stop=function(){this.previous=(new Date).getTime()},b.exports=c},{}],18:[function(a){"use strict";var b=a("../core/system");b.define("watch",["watcher"],function(a){var b=this.watcher.records;for(var c in b){var d=b[c],e=d.getter(a);e!==d.old&&d.listener(e,d.old),d.old=e}})},{"../core/system":12}]},{},[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]);